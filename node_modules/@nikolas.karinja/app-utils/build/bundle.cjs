"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("three"),t=require("uuid");function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var r=n(e),a=n(t);function i(e,t,n){return void 0!==e[t]?e[t]:n}var o=Object.freeze({__proto__:null,checkIsAsync:function(e){return"AsyncFunction"===e.constructor.name},checkParam:i});const s={Basic:{bodyCSSFix:!0,preventDefaultContextMenu:!1},Three:{Basic:{animUpdateInterval:60,bodyCSSFix:!0,preventDefaultContextMenu:!1,useAnimUpdateLoop:!1},Example:{animUpdateInterval:60,bodyCSSFix:!0,cameraFar:1e3,cameraFOV:60,cameraLookAt:new r.Vector3,cameraNear:.01,cameraPosition:new r.Vector3(0,1,0),preventDefaultContextMenu:!1,rendererSettings:{},useAnimUpdateLoop:!1}}};class u{constructor(e=s.Basic){this.Settings={bodyCSSFix:i(e,"bodyCSSFix",s.Basic.bodyCSSFix)}}async#e(){this.Settings.bodyCSSFix&&(document.body.style.margin="0px")}async#t(){window.addEventListener("contextmenu",(e=>{e.preventDefault()}))}async onStart(){}onUpdate(){}async start(){this.#e(),this.#t(),window.addEventListener("DOMContentLoaded",(async()=>{await this.onStart(),this.update()}))}update(){requestAnimationFrame((()=>{this.onUpdate(),this.update()}))}}u.prototype.$Props={isBasicApp:!0};class c extends u{constructor(e=s.Three.Basic){super(),this.updateAnim=!1,this.Clock=new r.Clock,this.Settings={animUpdateInterval:i(e,"animUpdateInterval",s.Three.Basic.animUpdateInterval),bodyCSSFix:i(e,"bodyCSSFix",s.Three.Basic.bodyCSSFix),useAnimUpdateLoop:i(e,"useAnimUpdateLoop",s.Three.Basic.useAnimUpdateLoop)},this.Time={delta:0,elapsed:0,frame:0,last:0}}onRender(e,t,n){}onUpdate(e,t,n){}update(){requestAnimationFrame((e=>{this.Time.frame=e,this.Time.delta=this.Clock.getDelta(),this.Time.elapsed=this.Clock.getElapsedTime(),(!this.Time.last||e-this.Time.last>=1e3/(this.Settings.animUpdateInterval+1))&&(this.Time.last=e,this.updateAnim=!0),this.onUpdate(this.Time.delta,this.Time.elapsed,this.updateAnim),this.onRender(this.Time.delta,this.Time.elapsed,this.updateAnim),this.updateAnim&&(this.updateAnim=!1),this.update()}))}}c.prototype.$Props.isBasicThreeApp=!0;class d extends c{constructor(e=s.Three.Example){super(),this.Settings={animUpdateInterval:i(e,"animUpdateInterval",s.Three.Example.animUpdateInterval),bodyCSSFix:i(e,"bodyCSSFix",s.Three.Example.bodyCSSFix),cameraFar:i(e,"cameraFar",s.Three.Example.cameraFar),cameraFOV:i(e,"cameraFOV",s.Three.Example.cameraFOV),cameraLookAt:i(e,"cameraLookAt",s.Three.Example.cameraLookAt),cameraNear:i(e,"cameraNear",s.Three.Example.cameraNear),cameraPosition:i(e,"cameraPosition",s.Three.Example.cameraPosition),rendererSettings:i(e,"rendererSettings",s.Three.Example.rendererSettings),useAnimUpdateLoop:i(e,"useAnimUpdateLoop",s.Three.Example.useAnimUpdateLoop)},this.Scene=new r.Scene,this.Scene.background=new r.Color(2171169),this.Camera=new r.PerspectiveCamera(this.Settings.cameraFOV,window.innerWidth/window.innerHeight,this.Settings.cameraNear,this.Settings.cameraFar),this.Camera.position.copy(this.Settings.cameraPosition),this.Camera.lookAt(this.Settings.cameraLookAt),this.Renderer=new r.WebGLRenderer(this.Settings.rendererSettings),this.Renderer.setPixelRatio(window.devicePixelRatio),this.Renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.Renderer.domElement),window.addEventListener("resize",(()=>this.resize()))}resize(){this.Camera.aspect=window.innerWidth/window.innerHeight,this.Camera.updateProjectionMatrix(),this.Renderer.setSize(window.innerWidth,window.innerHeight)}onRender(){this.Renderer.render(this.Scene,this.Camera)}}d.prototype.$Props.isExampleThreeApp=!0;var p=Object.freeze({__proto__:null,SETTINGS:s,BasicApp:u,BasicThreeApp:c,ExampleThreeApp:d,startApp:function(e=u,...t){e.prototype.$Props.isBasicApp?(window.App=new e(...t),window.App.start()):console.error("<@nikolas.karinja/app-utils> Apps: <appClass> is not an equivalent or sub-class of <BasicApp>.")}});function h(e){return e[Math.floor(Math.random()*e.length)]}function m(e,t=0,n=1){e.splice(t,n)}var l=Object.freeze({__proto__:null,getRandomValue:h,getRandomValueRanged:function(e,t=0,n="max-index"){return n="max-index"==n?e.length:n,0==t&&n==e.length?h(e):e[Math.floor(Math.random()*(n-t)+t)]},getSortedHL:function(e){return e.sort(((e,t)=>t-e))},getSortedLH:function(e){return e.sort(((e,t)=>e-t))},getValue:function(e,t=0){return e[t]},removeIndex:m,removeValue:function(e,t,n=1){m(e,e.indexOf(t),n)}});function g(){return a.v4()}function y(){return g()}function f(e){return S(e)?a.version(e):void console.error("<@nikolas.karinja/app-utils> UUID: String is not a valid UUID.")}function S(e){return e?a.validate(e):(console.error("<@nikolas.karinja/app-utils> UUID: No string was passed to validate."),!1)}var x=Object.freeze({__proto__:null,genV1:function(){return a.v1()},genV3:function(){return a.v3()},genV4:g,genV5:function(){return a.v5()},generate:y,getVersion:f,validate:S,validateV1:function(e){return 1===f(e)},validateV3:function(e){return 3===f(e)},validateV4:function(e){return 4===f(e)},validateV5:function(e){return 5===f(e)}});class v{constructor(){this.array=new(void 0),this.nameToIndex=new(void 0),this.uuid=y(),this.uuidToIndex=new(void 0)}#n(e,t){return!!("uuid"==e?this.uuidToIndex:this.nameToIndex).includes(t)}#r(e,t){const n=this[("uuid"==e?"uuid":"name")+"ToIndex"].indexOf(t);return this.array[n]}#a(e,t){for(let n of t){const t=this[("uuid"==e?"uuid":"name")+"ToIndex"].indexOf(n);this.array.removeIndex(t),this.nameToIndex.removeIndex(t),this.uuidToIndex.removeIndex(t)}}add(){for(let e of arguments)"object"==typeof e&&(e.uuid=e.uuid?e.uuid:y(),e.name=e.name?e.name:`item#${this.array.length}`,this.array.push(e),this.uuidToIndex.push(e.uuid),this.nameToIndex.push(e.name))}check(e){return{byUUID:()=>this.#n("uuid",e),byName:()=>this.#n("name",e)}}get(e){return{byUUID:()=>this.#r("uuid",e),byName:()=>this.#r("name",e)}}remove(){return{byUUID:()=>this.#a("uuid",arguments),byName:()=>this.#a("name",arguments)}}}var w=Object.freeze({__proto__:null,StorageTable:v,createStorageTable:function(){return new v}});function b(e=new Date){return{ampm:T(e),dayOfMonth:A(e),dayOfWeek:D(e),dayOfWeekAbr:C(e),hour24:U(e),hour12:F(e),minutes:M(e),month:I(e),monthAbr:O(e),monthNumber:k(e),year:_(e)}}function T(e=new Date){return e.getHours()<12?"AM":"PM"}function A(e=new Date){return e.getDate()}function D(e=new Date){switch(e.getDay()){case 0:return"Sunday";case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday"}}function C(e=new Date){switch(e.getDay()){case 0:return"Sun";case 1:return"Mon";case 2:return"Tue";case 3:return"Wed";case 4:return"Thu";case 5:return"Fri";case 6:return"Sat"}}function U(e=new Date){return e.getHours()}function F(e=new Date){return e.getHours()%12||12}function M(e=new Date){return e.getMinutes()}function I(e=new Date){switch(e.getMonth()){case 0:return"January";case 1:return"February";case 2:return"March";case 3:return"April";case 4:return"May";case 5:return"June";case 6:return"July";case 7:return"August";case 8:return"September";case 9:return"October";case 10:return"November";case 11:return"December"}}function O(e=new Date){switch(e.getMonth()){case 0:return"Jan";case 1:return"Feb";case 2:return"Mar";case 3:return"Apr";case 4:return"May";case 5:return"Jun";case 6:return"Jul";case 7:return"Aug";case 8:return"Sep";case 9:return"Oct";case 10:return"Nov";case 11:return"Dec"}}function k(e=new Date){return e.getMonth()+1}function _(e=new Date){return e.getFullYear()}var B=Object.freeze({__proto__:null,convertToDouble:function(e=1){const t=e.toString();return t.length<2?`0${t}`:t},generateData:b,generateDataString:function(e=new Date){return JSON.stringify(b(e))},getAMPM:T,getDayOfMonth:A,getDayOfWeek:D,getDayOfWeekAbreviation:C,getHour24:U,getHour12:F,getMinutes:M,getMonth:I,getMonthAbreviation:O,getMonthNumber:k,getYear:_});exports.Apps=p,exports.Array=l,exports.Script=o,exports.Storage=w,exports.Time=B,exports.UUID=x;
